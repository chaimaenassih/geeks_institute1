{% extends 'base.html' %}
{% block title %}{{ vehicle.year }} {{ vehicle.make }} {{ vehicle.model }}{% endblock %}

{% block content %}
  <div class="max-w-3xl mx-auto">
    <div class="bg-white border rounded-xl shadow-sm overflow-hidden">
      {% if vehicle.photo_url %}
        <img src="{{ vehicle.photo_url }}" alt="{{ vehicle.make }} {{ vehicle.model }}"
             class="h-96 w-full object-cover" loading="lazy" decoding="async"
             onerror="this.style.display='none'">
      {% endif %}
      <div class="px-4 py-3 bg-zinc-900 text-white">
        <h2 class="text-lg font-semibold">Vehicle Details</h2>
      </div>
       
      {% if sale %}
          <div class="px-4 py-3 bg-emerald-50 border-b border-emerald-200 text-emerald-800">
            Sold on {{ sale.sale_date }} to <strong>{{ sale.customer_name }}</strong>
            {% if sale.salesperson_name %} by <strong>{{ sale.salesperson_name }}</strong>{% endif %}
            for <strong>{{ "{:,.2f}".format(sale.sale_price) }} DH</strong>.
              </div>
         {% else %}
            <div class="px-4 py-3 bg-amber-50 border-b border-amber-200 text-amber-800">
             Not sold yet.
              <a href="{{ url_for('sales.new_sale', vehicle_id=vehicle.id) }}"
                class="ml-2 inline-flex items-center px-3 py-1.5 rounded-md bg-brand hover:bg-brand-dark text-white text-sm">
                Record Sale
              </a>
            </div>
        {% endif %}

      <div class="p-4">
        <dl class="divide-y divide-gray-200">
          <div class="py-3 flex justify-between"><dt class="font-medium">Make:</dt><dd>{{ vehicle.make }}</dd></div>
          <div class="py-3 flex justify-between"><dt class="font-medium">Model:</dt><dd>{{ vehicle.model }}</dd></div>
          <div class="py-3 flex justify-between"><dt class="font-medium">Year:</dt><dd>{{ vehicle.year }}</dd></div>
          <div class="py-3 flex justify-between"><dt class="font-medium">VIN:</dt><dd class="font-mono text-sm">{{ vehicle.vin }}</dd></div>
          <div class="py-3 flex justify-between"><dt class="font-medium">Color:</dt><dd>{{ vehicle.color or 'N/A' }}</dd></div>
          <div class="py-3 flex justify-between"><dt class="font-medium">Price:</dt><dd class="font-semibold text-emerald-600">{{ "{:,.2f}".format(vehicle.price) }} DH</dd></div>
        </dl>
      </div>

      <div class="px-4 py-3 border-t bg-gray-50 flex justify-end gap-2">
        <a href="{{ url_for('vehicles.index') }}" class="px-3 py-2 rounded-md border text-sm hover:bg-gray-100">Back</a>
        <a href="{{ url_for('vehicles.edit', vehicle_id=vehicle.id) }}" class="px-3 py-2 rounded-md bg-brand hover:bg-brand-dark text-white text-sm">Edit</a>
      </div>
    </div>
  </div>
{% endblock %}