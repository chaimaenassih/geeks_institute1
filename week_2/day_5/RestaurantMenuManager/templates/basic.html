<!doctype html>
<html lang="en" class="h-full">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="color-scheme" content="light dark" />
    <meta name="theme-color" content="#7c3aed" />
    <title>{% block title %}Menu Manager Â· 2025{% endblock %}</title>

    <!-- Inter font -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300..800&display=swap" rel="stylesheet" />

    <!-- Tailwind CSS (CDN) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            fontFamily: { sans: ["Inter", "ui-sans-serif", "system-ui"] },
            colors: {
              brand: {
                DEFAULT: "#7c3aed",
                50: "#f3f1ff",
                100: "#e9e5ff",
                200: "#d2caff",
                300: "#b3a1ff",
                400: "#8b6dff",
                500: "#7c3aed",
                600: "#6d28d9",
                700: "#5b21b6",
                800: "#4c1d95",
                900: "#3b136f",
              },
            },
            boxShadow: { soft: "0 10px 30px rgba(16,24,40,0.08)" },
            borderRadius: { xl2: "1.25rem" },
          },
          container: { center: true, padding: "1rem" },
        },
      };
    </script>

    <style>
      html, body { height: 100%; }
      body { font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial, "Apple Color Emoji", "Segoe UI Emoji"; }
      .focus-ring:focus { outline: none; box-shadow: 0 0 0 3px rgba(124, 58, 237, .35); }
    </style>

  
    <script>
      (function () {
        const theme = localStorage.getItem("theme");
        if (theme === "dark" || (!theme && window.matchMedia("(prefers-color-scheme: dark)").matches)) {
          document.documentElement.classList.add("dark");
        }
      })();
    </script>
  </head>

  <body class="min-h-full bg-gradient-to-b from-slate-50 to-white text-slate-800 dark:from-slate-950 dark:to-slate-900 dark:text-slate-100">
    <a href="#main" class="sr-only focus:not-sr-only focus-ring absolute left-3 top-3 z-50 rounded-lg bg-brand-600 px-3 py-2 text-sm text-white">Skip to content</a>

    <!-- Top Nav -->
    <header class="sticky top-0 z-40 border-b border-slate-200/60 bg-white/80 backdrop-blur dark:border-slate-800 dark:bg-slate-900/70">
      <div class="container max-w-6xl flex items-center justify-between py-3">
        <a href="{{ url_for('menu') }}" class="inline-flex items-center gap-2 focus-ring rounded-lg px-1">
          <span class="inline-flex h-8 w-8 rounded-xl bg-gradient-to-br from-brand-400 to-brand-600 shadow-soft"></span>
          <span class="font-semibold tracking-tight">Menu Manager</span>
        </a>
        <nav class="flex items-center gap-1.5">
          <a href="{{ url_for('menu_by_category', category='main') }}" class="px-3 py-1.5 rounded-lg text-sm hover:bg-slate-100 dark:hover:bg-slate-800">Main</a>
          <a href="{{ url_for('menu_by_category', category='dessert') }}" class="px-3 py-1.5 rounded-lg text-sm hover:bg-slate-100 dark:hover:bg-slate-800">Desserts</a>
          <a href="{{ url_for('menu_by_category', category='beverage') }}" class="px-3 py-1.5 rounded-lg text-sm hover:bg-slate-100 dark:hover:bg-slate-800">Beverages</a>
          <button id="themeToggle" type="button" class="ml-2 px-3 py-1.5 rounded-lg text-sm border border-slate-300/70 dark:border-slate-700 hover:bg-slate-100 dark:hover:bg-slate-800 focus-ring" aria-label="Toggle dark mode">ðŸŒ“</button>
        </nav>
      </div>
    </header>

    <!-- Page -->
    <main id="main" class="container max-w-6xl py-6 space-y-4">
      {% block page_header %}
      <div class="flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between">
        <h1 class="text-2xl md:text-3xl font-bold tracking-tight">
          Restaurant Menu <span class="text-brand-600">2025</span>
        </h1>
        {% block header_actions %}{% endblock %}
      </div>
      {% endblock %}

      <!-- Flash messages -->
      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          <div role="status" class="space-y-2">
            {% for cat, msg in messages %}
              {% set tone = "border-slate-200 bg-white/90 dark:bg-slate-800/60" %}
              {% if cat == "success" %}{% set tone = "border-emerald-300 bg-emerald-50/90 dark:bg-emerald-900/30 text-emerald-900 dark:text-emerald-100" %}{% endif %}
              {% if cat == "danger" %}{% set tone = "border-rose-300 bg-rose-50/90 dark:bg-rose-900/30 text-rose-900 dark:text-rose-100" %}{% endif %}
              {% if cat == "warning" %}{% set tone = "border-amber-300 bg-amber-50/90 dark:bg-amber-900/30 text-amber-900 dark:text-amber-100" %}{% endif %}
              <div class="rounded-xl border px-4 py-2 shadow-soft {{ tone }}">{{ msg }}</div>
            {% endfor %}
          </div>
        {% endif %}
      {% endwith %}

      <!-- Content card -->
      <section class="rounded-2xl border border-slate-200/70 bg-white/80 shadow-soft dark:border-slate-800 dark:bg-slate-900/60">
        <div class="p-4 md:p-6">
          {% block content %}{% endblock %}
        </div>
      </section>
    </main>


    {% block scripts %}{% endblock %}
    <script>
      document.getElementById("themeToggle")?.addEventListener("click", function () {
        const root = document.documentElement;
        const isDark = root.classList.toggle("dark");
        localStorage.setItem("theme", isDark ? "dark" : "light");
      });
    </script>
  </body>
</html>