<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>XP – Nested, Closure, Currying, Compose</title>
  <style>
    /* Page volontairement vide, on loggue dans la console uniquement */
    body { margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial; }
  </style>
</head>
<body>
  <script>
/*************************************************
 * Exercise 1 : Nested functions
 *
 * Avant exécution – PRÉDICTION :
 * - flat(4) ajoute "____"
 * - mountain(4) ajoute "/" + "''''" + "\"
 * - flat(4) ajoute encore "____"
 * => Résultat final : "____/''''\\____"
 * (Note: en JS, on doit échapper le backslash dans les chaînes)
 *
 * Explication :
 * - result démarre vide
 * - flat(x) boucle x fois et concatène "_"
 * - mountain(x) ajoute "/" puis x fois "'" puis "\\"
 *************************************************/

// Version convertie en fonctions fléchées imbriquées
const landscape = () => {
  let result = "";

  const flat = (x) => {
    for (let count = 0; count < x; count++) {
      result = result + "_";
    }
  };

  const mountain = (x) => {
    result = result + "/";
    for (let counter = 0; counter < x; counter++) {
      result = result + "'";
    }
    result = result + "\\";
  };

  flat(4);
  mountain(4);
  flat(4);

  return result;
};

// Vérification (optionnelle) :
console.log("Ex1:", landscape()); // attendu: ____/''''\____


/*************************************************
 * Exercise 2 : Closure
 *
 * Avant exécution – PRÉDICTION :
 * addToTen = addTo(10) capture x = 10
 * addToTen(3) => 10 + 3 = 13
 *************************************************/
const addTo = x => y => x + y;
const addToTen = addTo(10);
console.log("Ex2:", addToTen(3)); // 13


/*************************************************
 * Exercise 3 : Currying
 *
 * Avant exécution – PRÉDICTION :
 * curriedSum(30)(1) => 30 + 1 = 31
 *************************************************/
const curriedSum1 = (a) => (b) => a + b;
console.log("Ex3:", curriedSum1(30)(1)); // 31


/*************************************************
 * Exercise 4 : Currying
 *
 * Avant exécution – PRÉDICTION :
 * add5 = curriedSum(5)
 * add5(12) => 5 + 12 = 17
 *************************************************/
const curriedSum2 = (a) => (b) => a + b;
const add5 = curriedSum2(5);
console.log("Ex4:", add5(12)); // 17


/*************************************************
 * Exercise 5 : Composing
 *
 * Avant exécution – PRÉDICTION :
 * compose(add1, add5)(10)
 * g(a)=add5(10)=15 ; puis f(15)=add1(15)=16
 * => 16
 *************************************************/
const compose = (f, g) => (a) => f(g(a));
const add1 = (num) => num + 1;
const add5f = (num) => num + 5;
console.log("Ex5:", compose(add1, add5f)(10)); // 16
  </script>
</body>
</html>
